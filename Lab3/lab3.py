import flet as ftimport numpy as npimport matplotlib.pyplot as pltimport timedef aitken_interpolation(x, y, xp):    n = len(x)    p = np.copy(y)    for k in range(1, n):        for i in range(n - k):            p[i] = ((xp - x[i + k]) * p[i] + (x[i] - xp) * p[i + 1]) / (x[i] - x[i + k])    return p[0]def sin_function(x):    return np.sin(x)def sin_squared_function(x):    return np.sin(x) ** 2def make_graph(a, b, n, selected_func, graph_container, error_graph_container, error_table_container, page):    try:        a = float(a)        b = float(b)        n = int(n)        func = sin_function if selected_func == "sin(x)" else sin_squared_function        x_nodes = np.linspace(a, b, n)        y_nodes = func(x_nodes)        x_values = np.linspace(a, b, 200)        y_theoretical = func(x_values)        y_interpolated_aitken = np.array(            [aitken_interpolation(x_nodes, y_nodes, x) for x in x_values])        # Графік основної функції та інтерполяції        plt.figure(figsize=(8, 5))        plt.plot(x_values, y_theoretical, label=selected_func, linestyle='--', color='blue')        plt.plot(x_values, y_interpolated_aitken, label='Інтерполяція Ейткена', color='red')        plt.scatter(x_nodes, y_nodes, color='black', label='вузли інтерполяції')        plt.xlabel("x")        plt.ylabel("y")        plt.legend()        plt.title("Інтерполяція: Теоретична функція vs Інтерполяція Ейткена")        plt.grid()        graph_path = f"plot_{time.time()}.png"        plt.savefig(graph_path)        plt.close()        img = ft.Image(src=graph_path, width=600, height=400)        graph_container.controls.clear()        graph_container.controls.append(img)        graph_container.update()        # Графік похибки        plt.figure(figsize=(8, 5))        error = np.abs(y_theoretical - y_interpolated_aitken)        plt.plot(x_values, error, label='Похибка', color='purple')        plt.xlabel("x")        plt.ylabel("Похибка")        plt.title("Графік похибки інтерполяції")        plt.legend()        plt.grid()        error_graph_path = f"error_plot_{time.time()}.png"        plt.savefig(error_graph_path)        plt.close()        error_img = ft.Image(src=error_graph_path, width=600, height=400)        error_graph_container.controls.clear()        error_graph_container.controls.append(error_img)        error_graph_container.update()        # Таблиця похибок для одного x        x_sample = (a + b) / 2        y_exact = func(x_sample)        y_interp = aitken_interpolation(x_nodes, y_nodes, x_sample)        error_value = abs(y_exact - y_interp)        error_table = ft.DataTable(            columns=[ft.DataColumn(ft.Text("x")), ft.DataColumn(ft.Text("Точне значення")),                     ft.DataColumn(ft.Text("Інтерполяційне значення")), ft.DataColumn(ft.Text("Похибка"))],            rows=[                ft.DataRow(                    cells=[                        ft.DataCell(ft.Text(f"{x_sample:.4f}")),                        ft.DataCell(ft.Text(f"{y_exact:.6f}")),                        ft.DataCell(ft.Text(f"{y_interp:.6f}")),                        ft.DataCell(ft.Text(f"{error_value:.6f}"))                    ]                )            ]        )        error_table_container.controls.clear()        error_table_container.controls.append(error_table)        error_table_container.update()        page.update()    except ValueError:        print("Помилка введення: перевірте, чи правильно введені значення.")def main(page: ft.Page):    page.bgcolor = "white"    page.theme = ft.Theme(color_scheme_seed="black")    page.title = "Лабораторна робота №3"    input_field_a = ft.TextField(label="Введіть a")    input_field_b = ft.TextField(label="Введіть b")    input_field_n = ft.TextField(label="Введіть n (кількість вузлових точок)")    function_selector = ft.Dropdown(        label="Оберіть функцію",        options=[            ft.dropdown.Option("sin(x)"),            ft.dropdown.Option("sin^2(x)")        ],        value="sin(x)"    )    graph_container = ft.Column()    error_graph_container = ft.Column()    error_table_container = ft.Column()    main_tab = ft.Column(        controls=[            ft.Text("Інтерполяція за методом Ейткена"),            input_field_a,            input_field_b,            input_field_n,            function_selector,            ft.ElevatedButton("Вивід графіків", on_click=lambda _: make_graph(                input_field_a.value, input_field_b.value, input_field_n.value, function_selector.value,                graph_container, error_graph_container, error_table_container, page            )),            graph_container,            ft.Divider(),            ft.Text("Графік похибки:"),            error_graph_container,            ft.Divider(),            ft.Text("Оцінка похибки для x (в таблиці):"),            error_table_container        ], scroll=ft.ScrollMode.ALWAYS    )    tabs = ft.Tabs(        selected_index=0,        tabs=[            ft.Tab(text="Головна", content=main_tab)        ]    )    page.add(ft.Container(content=tabs, expand=True))ft.app(target=main)